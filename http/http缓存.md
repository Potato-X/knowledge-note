# HTTP缓存

## HTTP缓存分为强制缓存和协商缓存

### 强制缓存

强制缓存故名思意就是不走服务器，直接通过浏览器去拿缓存，在向后台请求资源的时候，浏览器自己会把服务器返回的资源缓存一份，如果开了强制缓存后，则下次再请求资源的时候，就直接向浏览器拿之前的缓存资源

#### Expires

在http1.0规范里，通过设置请求头expires这个字段来控制浏览器缓存的有效时间，expires这个字段本身表示的意思是服务端返回的过期时间，如果请求发出后，请求的本地时间小于这个服务器返回的到期时间（expires），则采用浏览器缓存的资源，否则就视为缓存失效了，需要重新请求服务器获取资源，浏览器也需要重新缓存请求的资源；

缺点:使用expires判断是否缓存失效是通过客户端的本地时间与服务器返回的到期时间进行比较的，可能会存在服务器的时间与客户端的本地时间不一样，比如客户端本地时间会比服务器的时间快个几分钟或者慢个几分钟，则就导致同一份资源可能在不同客户端的浏览器的缓存时间间隔就不同，存在误差

解决方法：为了规避上诉使用expires这个字段来判断是否缓存有效这个方法所存在的缺点，于是http1.1规范里就新出了一个cache-control这个请求头字段

#### Cache-control

Cache-control常见的属性值如下所示

|属性   |值  |备注|
-------|----|-----
max-age|3600|例如值为3600，表示（当前时间+3600秒）内不与服务器请求新的数据资源
s-maxage|    |和max-age一样，但这个是设定代理服务器的缓存时间
private|    |仅客户端的浏览器可以换成，代理服务器不能换成资源
public|     |客户端的浏览器和代理服务器都可以缓存请求的资源
no-store|   |不缓存任何数据，每次都是重新向服务器请求最新的资源
no-cache|   |设置为此值后，客户端浏览器的是否采用缓存资源将通过服务器判断后返回决定（即协商缓存）

### 协商缓存



